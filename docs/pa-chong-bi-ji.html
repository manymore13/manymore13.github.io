<!DOCTYPE html>
<html lang="en">
        <head>
                        <meta charset="utf-8" />
                        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                        <meta name="generator" content="Pelican" />
                        <title>爬虫笔记</title>
                        <link rel="stylesheet" href="/theme/css/main.css" />
    <meta name="description" content="Python 爬虫 Requests Requests是一个优雅而简单的Python HTTP库。 具体用法参考 Home-page Scrapy Scrapy是一个快速的高级网页抓取和网页抓取框架，用于抓取网站并从页面中提取结构化数据。它广泛用于数据挖掘到监控和自动化测 …" />
        </head>

        <body id="index" class="home">
                <header id="banner" class="body">
                        <h1><a href="/">manymore13'notes</a></h1>
                        <nav><ul>
                                                <li><a href="/category/android_notes.html">Android_Notes</a></li>
                                                <li><a href="/category/financial_notes.html">Financial_Notes</a></li>
                                                <li><a href="/category/gu-zhi-gong-ju.html">估值工具</a></li>
                                                <li><a href="/category/java_notes.html">Java_Notes</a></li>
                                                <li><a href="/category/ji-suan-ji.html">计算机</a></li>
                                                <li><a href="/category/jie-zhi.html">价值</a></li>
                                                <li><a href="/category/life_notes.html">Life_Notes</a></li>
                                                <li class="active"><a href="/category/python_notes.html">Python_Notes</a></li>
                                                <li><a href="/category/review.html">Review</a></li>
                        </ul></nav>
                </header><!-- /#banner -->
  <section id="content" class="body">
    <article>
      <header>
        <h1 class="entry-title">
          <a href="/pa-chong-bi-ji.html" rel="bookmark"
             title="Permalink to 爬虫笔记">爬虫笔记</a></h1>
      </header>

      <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-05-15T16:23:43+08:00">
                Published: Mon 15 May 2023
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="/author/manymore13.html">manymore13</a>
                </address>
        <p>In <a href="/category/python_notes.html">Python_Notes</a>.</p>
        
</footer><!-- /.post-info -->        <ul>
<li>Python</li>
<li>爬虫</li>
</ul>
<hr>
<h2>Requests</h2>
<p>Requests是一个优雅而简单的Python HTTP库。</p>
<p>具体用法参考 <a href="https://requests.readthedocs.io/en/latest/">Home-page</a></p>
<hr>
<h2>Scrapy</h2>
<p>Scrapy是一个快速的高级网页抓取和网页抓取框架，用于抓取网站并从页面中提取结构化数据。它广泛用于数据挖掘到监控和自动化测试领域。
- <a href="https://docs.scrapy.org/">scrapy官网</a>
- <a href="https://scrapy-cookbook.readthedocs.io/zh_CN/latest/index.html">scrapy-cookbook</a></p>
<hr>
<h2>Selenium</h2>
<p><code>Selenium</code>是一个自动化测试工具，支持各种浏览器，包括Chrome、Safari、Firefox 等主流界面式浏览器。简单理解，Selenium可以模拟操作浏览器，对一些需要动态加载的页面，不需要我们执行JavaScript等操作，即可自动加载完成后的页面。</p>
<hr>
<h3>安装Selenium</h3>
<p>直接使用pip安装</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>selenium
</code></pre></div>

<p>我安装的版本是 Version: 4.9.0</p>
<ul>
<li>安装Selenium之后，还需要下载对应的浏览器驱动</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: center;"><a href="https://sites.google.com/a/chromium.org/chromedriver/home">Chrome driver</a></th>
<th style="text-align: center;"><a href="https://github.com/mozilla/geckodriver/releases">Firefox driver</a></th>
<th style="text-align: center;"><a href="https://github.com/mozilla/geckodriver/releases">IE driver</a></th>
<th style="text-align: center;"><a href="https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver">Edge driver</a></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>检查是否安装成功</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Edge</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.so.com/&quot;</span><span class="p">)</span>
<span class="nb">input</span><span class="p">(</span><span class="s2">&quot;按任意键退出&quot;</span><span class="p">)</span>
<span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</code></pre></div>

<p>若能正常打开浏览器，则安装成功</p>
<h3>定位元素</h3>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">ol</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;vegetables&quot;</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;potatoes&quot;</span><span class="p">&gt;</span>…
 <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;onions&quot;</span><span class="p">&gt;</span>…
 <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tomatoes&quot;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Tomato is a Vegetable<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>…
<span class="p">&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;fruits&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bananas&quot;</span><span class="p">&gt;</span>…
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;apples&quot;</span><span class="p">&gt;</span>…
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tomatoes&quot;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Tomato is a Fruit<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>…
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></div>

<p>以上面html为例，我们来定位元素</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>

<span class="c1"># 通过class name定位</span>
<span class="n">vegetable</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s2">&quot;tomatoes&quot;</span><span class="p">)</span>

<span class="c1"># 通过id定位水果元素，再通过水果元素定位西红柿元素，这种嵌套定位效率不是最好的</span>
<span class="n">fruits</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;fruits&quot;</span><span class="p">)</span>
<span class="n">fruit</span> <span class="o">=</span> <span class="n">fruits</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CLASS_NAME</span><span class="p">,</span><span class="s2">&quot;tomatoes&quot;</span><span class="p">)</span>

<span class="c1"># 通过CSS 选择器定位元素</span>
<span class="n">fruit</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span><span class="s2">&quot;#fruits .tomatoes&quot;</span><span class="p">)</span>

<span class="c1"># 通过标签名定位元素，这里是获取所有标签li   </span>
<span class="n">plants</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">TAG_NAME</span><span class="p">,</span> <span class="s2">&quot;li&quot;</span><span class="p">)</span>
</code></pre></div>

<p>另外一个实例: 打开百度，然后搜索</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 我的是微软Edge浏览器</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Edge</span><span class="p">()</span>
<span class="c1"># 加载网页.</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.baidu.com/&quot;</span><span class="p">)</span>

<span class="n">title</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">title</span>
<span class="k">assert</span> <span class="n">title</span> <span class="o">==</span> <span class="s2">&quot;百度一下，你就知道&quot;</span>

<span class="n">driver</span><span class="o">.</span><span class="n">implicitly_wait</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="c1"># 获取输入框元素</span>
<span class="n">text_box</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;kw&quot;</span><span class="p">)</span>
<span class="c1"># 获取提交按钮元素</span>
<span class="n">submit_button</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;#su&quot;</span><span class="p">)</span>
<span class="c1"># 输入关键词</span>
<span class="n">text_box</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;Selenium&quot;</span><span class="p">)</span>
<span class="c1"># 点击元素</span>
<span class="n">submit_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
<span class="c1"># 暂停一下，再退出，否则代码走完程序都退出，浏览器会一闪而过</span>
<span class="nb">input</span><span class="p">(</span><span class="s2">&quot;enter any key, quit&quot;</span><span class="p">)</span>
<span class="c1"># 关闭浏览器</span>
<span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</code></pre></div>

<h3>参考链接</h3>
<ul>
<li><a href="https://www.selenium.dev/documentation/">selenium官网</a></li>
<li><a href="https://pythondjango.cn/python/tools/7-python_selenium/">selenium使用教程</a></li>
</ul>
<h2>案例分享</h2>
<blockquote>
<p>分享一个简单的例子：爬静态网页，通过requests获取网页html，再通过正则匹配内容，最后把内容下载保存到本地</p>
</blockquote>
<p><a href="./crawl_xs.md">李敖回忆录</a></p>
<hr>
<h2>其他</h2>
<div class="highlight"><pre><span></span><code><span class="c1"># 依赖项处理</span>
pip<span class="w"> </span>freeze<span class="w"> </span>&gt;<span class="w"> </span>requirements.txt
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div>

<ul>
<li><a href="https://python3webspider.cuiqingcai.com/">Python3网络爬虫开发实战</a></li>
<li><a href="https://www.cnblogs.com/yfacesclub/p/11155775.html">selenium提取不了标签文本</a></li>
</ul>
<hr>
      </div><!-- /.entry-content -->

    </article>
  </section>
                <section id="extras" class="body">
                                <div class="blogroll">
                                        <h2>links</h2>
                                        <ul>
                                                        <li><a href="https://getpelican.com/">Pelican</a></li>
                                                        <li><a href="https://www.python.org/">Python.org</a></li>
                                                        <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                                                        <li><a href="#">You can modify those links in your config file</a></li>
                                        </ul>
                                </div><!-- /.blogroll -->
                                <div class="social">
                                        <h2>social</h2>
                                        <ul>

                                                        <li><a href="#">You can add links in your config file</a></li>
                                                        <li><a href="#">Another social link</a></li>
                                        </ul>
                                </div><!-- /.social -->
                </section><!-- /#extras -->

                <footer id="contentinfo" class="body">
                        <address id="about" class="vcard body">
                                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                        </address><!-- /#about -->

                        <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
                </footer><!-- /#contentinfo -->

        </body>
</html>